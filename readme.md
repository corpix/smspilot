# SMS Pilot

Модуль для отправки СМС сообщений через [smspilot.ru](http://smspilot.ru)

Реализует функции, описанные в спецификации API [v1.8.7](http://smspilot.ru/download/SMSPilotRu-HTTP-v1.8.7.rtf)

---
## Функции

Каждый метод возвращает экземпляр EventEmitter. Модуль основан на [Restler](https://github.com/danwrong/restler).

### pilot.sms(params) #EvenEmitter

---
Отправить смс сообщение.

  * `params` - Объект с параметрами для передачи серверу. Поля:

    * `to` - Номер абонента. Если требуется отправить сообщение нескольким абонентам, можно воспользоваться массивом.
    * `send` - Текст сообщения.

##### Event: success
  * `data`
    * `price` - Цена сообщения в кредитах
    * `credits` - Остаток на счету
    * `messages` - Массив отправленных сообщений
      * `id` - Идентификатор сообщения
      * `phone` - Номер абонента
      * `zone` - Зона(Например, 1 - Россия)
      * `status` - Статус сообщения
      * `getStatus` - Функция, позволяющая получить статус этого сообщения(шорткат для pilot.status, см. дальше)


### pilot.status(messageId) #EventEmitter

---
Получает статус сообщения по идентификатору `messageId`
`messageId` может быть как строкой/числом, так и массивом, если требуется получить статусы нескольких сообщений.

##### Event: success
  * `data` - Является массивом объектов, если было передано более одного идентификатора.
      * `id` - Идентификатор сообщения
      * `phone` - Номер абонента
      * `zone` - Зона(Например, 1 - Россия)
      * `status` - Статус сообщения

### pilot.status(messageId) #EventEmitter

---
Проверка баланса. Возвращает количество кредитов.
##### Event: success
  * `data` - Число кредитов(Number)


## TODO

  * Обновить до API2

## Баги и пуллреквесты
Да :)
